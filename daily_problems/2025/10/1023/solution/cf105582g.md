**提示 1：** 我们只需看每个溶液相较于标准多了多少盐，最后这些得打平。

**提示 2：** 分数怎么办？ $n$ 略大怎么办？

我们有一个目标，因此看看每个溶液和目标的差距。

目标是 $a/b$ ，则第 $i$ 个溶液本身有 $m_i$ 盐，目标有 $t_i\times a/b=at_i/b$ 盐，因此产生了 $(bm_i-at_i)/b$ 的差别。

我们选取的溶液要求满足这个差别的和是 $0$ ，也就是缺的盐刚好被多的盐补足。

这里有一堆分数，但是分母都是 $b$ ，所以直接去分母就好。

而 $n$ 较大可以用折半搜索，前半部分存下各种结果的方案数，再枚举后半部分的选取情况，查询前半部分能跟后半部分配对的方案数。

最后记得去掉空集，时间复杂度为 $\mathcal{O}(2^{n/2})$ 。

### 具体代码如下——

Python 做法如下——

```Python []
def main(): 
    n, a, b = MII()
    nums = []
    
    for _ in range(n):
        m, t = MII()
        m *= b
        t *= b
        nums.append(m - t // b * a)
    
    k = n // 2
    cnt = Counter()
    
    def f(idx, val):
        if idx == k:
            cnt[val] += 1
            return
        f(idx + 1, val + nums[idx])
        f(idx + 1, val)
    
    f(0, 0)
    
    vals = nums[k:]
    k2 = len(vals)
    
    ans = 0
    
    def g(idx, val):
        global ans
        if idx == k2:
            if -val in cnt:
                ans += cnt[-val]
            return 
        g(idx + 1, val + vals[idx])
        g(idx + 1, val)
    
    g(0, 0)
    
    print(ans - 1)
```

C++ 做法如下——

```cpp []
int main() {
	ios_base::sync_with_stdio(false);
	cin.tie(0);
	cout.tie(0);

	int n, a, b;
	cin >> n >> a >> b;

	int k1 = n / 2, k2 = n - k1;
	vector<int> v1(k1), v2(k2);

	for (int i = 0; i < k1; i ++) {
		int m, t;
		cin >> m >> t;
		m *= b;
		t *= b;
		v1[i] = m - t / b * a;
	}

	for (int i = 0; i < k2; i ++) {
		int m, t;
		cin >> m >> t;
		m *= b;
		t *= b;
		v2[i] = m - t / b * a;
	}

	map<long long, int> mp;

	auto dfs1 = [&] (auto &self, int idx, long long val) -> void {
		if (idx == k1) {
			mp[val] ++;
			return ;
		}
		self(self, idx + 1, val + v1[idx]);
		self(self, idx + 1, val);
	};

	dfs1(dfs1, 0, 0);

	long long ans = 0;

	auto dfs2 = [&] (auto &self, int idx, long long val) -> void {
		if (idx == k2) {
			auto pt = mp.find(-val);
			if (pt != mp.end()) ans += pt->second;
			return ;
		}
		self(self, idx + 1, val + v2[idx]);
		self(self, idx + 1, val);
	};

	dfs2(dfs2, 0, 0);

	cout << ans - 1;

	return 0;
}
```